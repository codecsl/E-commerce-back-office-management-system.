(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05051388"],{"1bab":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("cebe"),i=a.n(n),r=a("1af2"),s=a.n(r);function l(t){var e=i.a.create({baseURL:"http://127.0.0.1:8888/api/private/v1/",timeout:1e4});return e.interceptors.request.use((function(t){return t.headers.Authorization=window.sessionStorage.getItem("token"),s.a.start(),t})),e.interceptors.response.use((function(t){return s.a.done(),t})),e(t)}},"498a":function(t,e,a){"use strict";var n=a("23e7"),i=a("58a8").trim,r=a("c8d2");n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return i(this)}})},8268:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goodscanshu"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[a("a",{attrs:{href:"this.$route.path"}},[t._v("商品管理")])]),a("el-breadcrumb-item",[t._v("参数列表")])],1),a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"注意:只允许为第三级分类设置相关参数",type:"warning","show-icon":""}}),a("el-row",{staticClass:"sb"},[a("el-col",[a("span",[t._v("选择商品分类:")]),a("el-cascader",{attrs:{options:t.shuju,props:t.peizhi,expandTrigger:"hover"},on:{change:t.handleChange},model:{value:t.selectid,callback:function(e){t.selectid=e},expression:"selectid"}})],1)],1),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isBtn},on:{click:t.tjdx}},[t._v("添加参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dtcanshu,stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(e,n){return a("el-tag",{key:n,staticStyle:{"margin-right":"10px"},attrs:{closable:"",type:"","disable-transitions":!1}},[t._v(t._s(e))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{label:"id",type:"index"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"参数名称",width:"180"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.bjcsl(e.row.attr_id,e.row.cat_id,e.row.attr_sel,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.open(e.row.cat_id,e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only",disabled:t.isBtn}},[a("el-button",{attrs:{type:"primary",size:""},on:{click:t.tjdx}},[t._v("添加属性")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.jtcanshu,stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(e,n){return a("el-tag",{key:n,staticStyle:{"margin-right":"10px"},attrs:{closable:"",type:"","disable-transitions":!1}},[t._v(t._s(e))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{label:"id",type:"index"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"属性名称",width:"180"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.bjcsl(e.row.attr_id,e.row.cat_id,e.row.attr_sel)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.open(e.row.cat_id,e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:t.titles,visible:t.dxdialogVisible,width:"50%"},on:{"update:visible":function(e){t.dxdialogVisible=e},clost:t.addcolse}},[a("el-form",{ref:"ruleForm",attrs:{model:t.addForm,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:t.mingcheng,prop:"attr_name"}},[a("el-input",{model:{value:t.addForm.attr_name,callback:function(e){t.$set(t.addForm,"attr_name",e)},expression:"addForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dxdialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.quedinglo}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.bjdialogVisible,width:"50%"},on:{"update:visible":function(e){t.bjdialogVisible=e}}},[a("el-form",{ref:"bjrule",attrs:{"label-width":"100px",model:t.bjname,rules:t.rules}},[a("el-form-item",{attrs:{label:"编辑参数",prop:"attr_name"}},[a("el-input",{model:{value:t.bjname.attr_name,callback:function(e){t.$set(t.bjname,"attr_name",e)},expression:"bjname.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.bjdialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.bjquedingxiugai}},[t._v("确 定")])],1)],1)],1)],1)},i=[],r=(a("4160"),a("a15b"),a("ac1f"),a("1276"),a("498a"),a("159b"),a("d8fa")),s={name:"component_name",data:function(){return{canshu:{type:3,pagenum:"",pagesize:""},shuju:[],peizhi:{value:"cat_id",label:"cat_name",children:"children"},selectid:[],activeName:"many",dtcanshu:[],jtcanshu:[],dxdialogVisible:!1,addForm:{attr_name:""},rules:{attr_name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:2,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]},bjdialogVisible:!1,bjname:{attr_sel:"",attr_name:"",cat_id:"",attr_id:""},inputVisible:!1,inputValue:""}},methods:{getdata:function(t){var e=this;Object(r["h"])(t).then((function(t){var a=t.data;if(200!=a.meta.status)return e.$message.error("请检查网络坏境");e.shuju=a.data}))},handleChange:function(){3!=this.selectid.length&&(this.selectid=[]),this.getdtjt(this.catid,"many")},handleClick:function(t,e){this.getdtjt(this.catid,this.activeName)},tjdx:function(){this.dxdialogVisible=!0},addcolse:function(){this.$refs.ruleForm.resetFields()},getdtjt:function(t,e){var a=this;Object(r["e"])(t,e).then((function(t){var n=t.data;if(n.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[],t.inputVisible=!1,t.inputValue=""})),200!=n.meta.status)return a.$message.error("请求数据失败");"many"==e?a.dtcanshu=n.data:a.jtcanshu=n.data}))},quedinglo:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return t.$message.error("请添加参数");Object(r["m"])(t.catid,t.addForm.attr_name,t.activeName,"").then((function(e){t.jcfz(e,201,"添加失败","添加成功"),t.dxdialogVisible=!1}))})),this.getdtjt(this.catid,this.activeName)},bjcsl:function(t,e,a,n){var i=this;this.bjdialogVisible=!0,Object(r["a"])(e,t,a).then((function(t){var e=t.data;if(200!=e.meta.status)return i.$message.error("获取数据失败");i.bjname=e.data}))},bjquedingxiugai:function(){var t=this;this.$refs.bjrule.validate((function(e){if(!e)return t.$message.error("请按规则填写参数");Object(r["b"])(t.bjname).then((function(e){t.jcfz(e,200,"更新失败","更新成功")}))})),this.getdtjt(this.catid,this.activeName),this.bjdialogVisible=!1},open:function(t,e){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["f"])(t,e).then((function(t){a.jcfz(t,200,"删除失败","删除成功"),a.getdtjt(a.catid,a.activeName)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(t){if(0===t.inputValue.trim().length)return t.inputValue="",void(t.inputVisible=!1);t.attr_vals.push(t.inputValue.trim()),Object(r["g"])(t.cat_id,t.attr_id,t.attr_name,t.attr_sel,t.attr_vals.join(" ")),t.inputValue="",t.inputVisible=!1},jcfz:function(t,e,a,n){var i=t.data;if(i.meta.status!=e)return this.$message.error("".concat(a));this.$message.success("".concat(n))}},created:function(){this.getdata(this.canshu)},computed:{isBtn:function(){return 3!=this.selectid.length},catid:function(){return 3==this.selectid.length?this.selectid[2]:null},titles:function(){return"many"==this.activeName?"添加动态属性":"添加静态属性"},mingcheng:function(){return"many"==this.activeName?"添加动态参数":"添加静态参数"}}},l=s,o=(a("a0dc"),a("2877")),u=Object(o["a"])(l,n,i,!1,null,"2e883685",null);e["default"]=u.exports},"84ab":function(t,e,a){},a0dc:function(t,e,a){"use strict";var n=a("84ab"),i=a.n(n);i.a},c8d2:function(t,e,a){var n=a("d039"),i=a("5899"),r="​᠎";t.exports=function(t){return n((function(){return!!i[t]()||r[t]()!=r||i[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-05051388.f3bc738b.js.map