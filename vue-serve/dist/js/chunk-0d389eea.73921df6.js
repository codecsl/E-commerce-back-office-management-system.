(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d389eea"],{"28bf":function(e,t,r){"use strict";var a=r("f2d2"),o=r.n(a);o.a},"5bf9":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[r("a",{attrs:{href:"this.$rote.path"}},[e._v("商品管理")])]),r("el-breadcrumb-item",[e._v("添加商品")])],1),r("el-card",{staticClass:"box-card"},[r("el-alert",{staticClass:"hc",attrs:{title:"添加商品信息",type:"info","show-icon":"",center:""}}),r("el-steps",{staticClass:"steps",attrs:{active:e.currentactive,"align-center":""}},[r("el-step",{attrs:{title:"基本信息"}}),r("el-step",{attrs:{title:"商品参数"}}),r("el-step",{attrs:{title:"商品属性"}}),r("el-step",{attrs:{title:"商品图片"}}),r("el-step",{attrs:{title:"商品内容"}}),r("el-step",{attrs:{title:"完成"}})],1),r("el-form",{ref:"ruleFor",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-tabs",{staticClass:"tabs",staticStyle:{height:"100%"},attrs:{"tab-position":e.tabPosition,"before-leave":e.qiehuan},on:{"tab-click":e.current},model:{value:e.nam,callback:function(t){e.nam=t},expression:"nam"}},[r("el-tab-pane",{attrs:{label:"基本信息"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:e.ruleForm.goods_name,callback:function(t){e.$set(e.ruleForm,"goods_name",t)},expression:"ruleForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.goods_price,callback:function(t){e.$set(e.ruleForm,"goods_price",t)},expression:"ruleForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[r("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.goods_weight,callback:function(t){e.$set(e.ruleForm,"goods_weight",t)},expression:"ruleForm.goods_weight"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[r("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.goods_number,callback:function(t){e.$set(e.ruleForm,"goods_number",t)},expression:"ruleForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[r("el-cascader",{attrs:{options:e.shuju,props:e.peizhi,expandTrigger:"hover"},on:{change:e.handleChange},model:{value:e.ruleForm.goods_cat,callback:function(t){e.$set(e.ruleForm,"goods_cat",t)},expression:"ruleForm.goods_cat"}})],1)],1),r("el-tab-pane",{attrs:{label:"商品参数"}},e._l(e.dtcanshu,(function(t){return r("div",{key:t.attr_id},[r("span",[e._v(e._s(t.attr_name))]),r("br"),r("el-checkbox-group",{attrs:{size:"small"},model:{value:t.attr_vals,callback:function(r){e.$set(t,"attr_vals",r)},expression:"item.attr_vals"}},e._l(t.attr_vals,(function(e,t){return r("el-checkbox",{key:t,attrs:{label:e,border:""}})})),1)],1)})),0),r("el-tab-pane",{attrs:{label:"商品属性"}},[r("el-form",{attrs:{model:e.ruleForm}},e._l(e.jtcanshu,(function(t,a){return r("el-form-item",{key:a,attrs:{label:t.attr_name,prop:"goods_name"}},[r("el-input",{model:{value:t.attr_vals,callback:function(r){e.$set(t,"attr_vals",r)},expression:"item.attr_vals"}})],1)})),1)],1),r("el-tab-pane",{attrs:{label:"商品图片"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"http://127.0.0.1:8888/api/private/v1/upload","on-preview":e.handlePreview,"list-type":"picture",headers:e.headerobj,"on-success":e.succ,"on-remove":e.remove}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),r("el-dialog",{attrs:{visible:e.predialogVisible,width:"50%"},on:{"update:visible":function(t){e.predialogVisible=t}}},[r("img",{attrs:{src:e.preview}})])],1),r("el-tab-pane",{attrs:{label:"商品内容"}},[r("quill-editor",{staticStyle:{height:"300px"},model:{value:e.ruleForm.goods_introduce,callback:function(t){e.$set(e.ruleForm,"goods_introduce",t)},expression:"ruleForm.goods_introduce"}}),r("el-button",{staticStyle:{"margin-top":"100px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("添加商品")])],1)],1)],1)],1)],1)},o=[],s=(r("c740"),r("4160"),r("a15b"),r("a434"),r("a9e3"),r("ac1f"),r("1276"),r("159b"),r("2ef0")),i=r.n(s),n=r("d8fa"),l={name:"component_name",data:function(){return{canshu:{type:3,pagenum:"",pagesize:""},tabPosition:"left",ruleForm:{goods_name:"",goods_price:"",goods_number:"",goods_weight:"",goods_cat:[],pics:[],goods_introduce:"",attrs:[]},shuju:[],nam:"",currentactive:1,rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:10,message:"长度在 2到 10 个字符",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"blur"}]},peizhi:{value:"cat_id",label:"cat_name",children:"children"},dtcanshu:[],checkboxGroup1:[],jtcanshu:[],headerobj:{Authorization:window.sessionStorage.getItem("token")},preview:"",predialogVisible:!1}},methods:{getdata:function(e){var t=this;Object(n["h"])(e).then((function(e){var r=e.data;if(200!=r.meta.status)return t.$message.error("请检查网络坏境");t.shuju=r.data}))},current:function(e){this.currentactive=Number(this.nam)+1,2==e.index&&this.getdtjt(this.catid,"only")},handleChange:function(){3!=this.ruleForm.goods_cat.length&&(this.ruleForm.goods_cat=[]),this.getdtjt(this.catid,"many")},qiehuan:function(e,t){if("0"===t&&3!=this.ruleForm.goods_cat.length)return this.$message.error("请先选择商品分类"),!1},getdtjt:function(e,t){var r=this;Object(n["e"])(e,t).then((function(e){var a=e.data;a.data.forEach((function(e){e.attr_vals=e.attr_vals?e.attr_vals.split(" "):[]})),"many"==t?r.dtcanshu=a.data:(a.data.forEach((function(e){e.attr_vals=e.attr_vals.join(" ")})),r.jtcanshu=a.data)}))},handlePreview:function(e){this.preview=e.response.data.url,this.predialogVisible=!0},succ:function(e){var t={pic:e.tmp_path};this.ruleForm.pics.push(t)},remove:function(e){var t=e.response.data.temp_path,r=this.ruleForm.pics.findIndex((function(e){return e.pic==t}));this.ruleForm.pics.splice(r,1)},add:function(){var e=this;this.$refs.ruleFor.validate((function(t){if(!t)return e.$message.error("请填写必要的表单项");var r=i.a.cloneDeep(e.ruleForm);r.goods_cat=r.goods_cat.join(","),e.dtcanshu.forEach((function(e){var t={attr_id:e.attr_id,attr_value:e.attr_vals.join(" ")};r.attrs.push(t)})),e.jtcanshu.forEach((function(e){var t={attr_id:e.attr_id,attr_value:e.attr_vals};r.attrs.push(t)})),Object(n["o"])(r).then((function(t){var r=t.data;if(201!=r.meta.status)return e.$message.error("添加失败");e.$router.push("/goods")}))}))}},created:function(){this.getdata(this.canshu)},computed:{catid:function(){return 3==this.ruleForm.goods_cat.length?this.ruleForm.goods_cat[2]:null},attrname:function(){}}},c=l,u=(r("28bf"),r("2877")),d=Object(u["a"])(c,a,o,!1,null,"06bea303",null);t["default"]=d.exports},7156:function(e,t,r){var a=r("861d"),o=r("d2bb");e.exports=function(e,t,r){var s,i;return o&&"function"==typeof(s=t.constructor)&&s!==r&&a(i=s.prototype)&&i!==r.prototype&&o(e,i),e}},a434:function(e,t,r){"use strict";var a=r("23e7"),o=r("23cb"),s=r("a691"),i=r("50c4"),n=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),d=r("ae40"),m=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,h=Math.min,f=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!p},{splice:function(e,t){var r,a,u,d,m,p,_=n(this),v=i(_.length),F=o(e,v),x=arguments.length;if(0===x?r=a=0:1===x?(r=0,a=v-F):(r=x-2,a=h(g(s(t),0),v-F)),v+r-a>f)throw TypeError(b);for(u=l(_,a),d=0;d<a;d++)m=F+d,m in _&&c(u,d,_[m]);if(u.length=a,r<a){for(d=F;d<v-a;d++)m=d+a,p=d+r,m in _?_[p]=_[m]:delete _[p];for(d=v;d>v-a+r;d--)delete _[d-1]}else if(r>a)for(d=v-a;d>F;d--)m=d+a-1,p=d+r-1,m in _?_[p]=_[m]:delete _[p];for(d=0;d<r;d++)_[d+F]=arguments[d+2];return _.length=v-a+r,u}})},a9e3:function(e,t,r){"use strict";var a=r("83ab"),o=r("da84"),s=r("94ca"),i=r("6eeb"),n=r("5135"),l=r("c6b6"),c=r("7156"),u=r("c04e"),d=r("d039"),m=r("7c73"),p=r("241c").f,g=r("06cf").f,h=r("9bf2").f,f=r("58a8").trim,b="Number",_=o[b],v=_.prototype,F=l(m(v))==b,x=function(e){var t,r,a,o,s,i,n,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=f(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+c}for(s=c.slice(2),i=s.length,n=0;n<i;n++)if(l=s.charCodeAt(n),l<48||l>o)return NaN;return parseInt(s,a)}return+c};if(s(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var y,w=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof w&&(F?d((function(){v.valueOf.call(r)})):l(r)!=b)?c(new _(x(t)),r,w):x(t)},I=a?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;I.length>k;k++)n(_,y=I[k])&&!n(w,y)&&h(w,y,g(_,y));w.prototype=v,v.constructor=w,i(o,b,w)}},c740:function(e,t,r){"use strict";var a=r("23e7"),o=r("b727").findIndex,s=r("44d2"),i=r("ae40"),n="findIndex",l=!0,c=i(n);n in[]&&Array(1)[n]((function(){l=!1})),a({target:"Array",proto:!0,forced:l||!c},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s(n)},f2d2:function(e,t,r){}}]);
//# sourceMappingURL=chunk-0d389eea.73921df6.js.map